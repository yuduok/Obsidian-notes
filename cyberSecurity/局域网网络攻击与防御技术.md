### 内网安全管理

**网络监控**：针对局域网内的计算机进行监视和控制

**网络监控方式**：软硬结合

**网络监控软件运行原理**：
- 监听模式：
  - 被动接收和分析网络流量
  - 抓取总线MAC层数据帧，不直接干预或修改网络数据包
  - 通常使用镜像端口
- 网关模式：
  - 主动拦截和转发网络流量
  - 作为网络流量的中间节点，可以实时检查、过滤和分析数据包
  - 部署在路由器或交换机这些网络的关键位置
---
### 网络攻击的定义和分类

**目的**：破坏信息的五个性质——见[[网络安全概论]]

#### 网络攻击的分类
- 被动攻击类型:攻击者只是观察和分析网络中传输的数据，而不干扰信息流
  - 嗅探信息
  - 非法访问
  - 数据流分析
- 主动攻击类型：攻击者对某个连接中通过的数据进行各种处理
  - 篡改信息：截获Bos发出的消息篡改后再转发给Alice
  - 欺骗攻击：伪装成Bob，欺骗Alice
  - 拒绝服务攻击：阻塞、破坏服务器，使之无法响应客户请求
  - 重放攻击：窃听并记录消息，伪装成Bob再重发给Alice

欺骗攻击 compare to 重放攻击
![[Pasted image 20241221202301.png]]

---

#### 窃听攻击的原理

不影响信息的正常传输，对网络和主机透明（参考集线器）

#### 交换MAC溢出攻击

原理：黑客终端通过**耗尽**交换机转发表的存储空间，使得交换机无法根据收到的MAC帧在转发表中添加新的转发项，导致交换机以**广播**方式完成正常MAC帧的传输

**防御**：限制每个端口允许接收的源MAC地址不同的MAC帧数量

---
### 截获攻击

原理：改变信息的传输路径，A->B 变为 **A->hacker->B**

#### MAC地址欺骗

防御：
- 把端口和MAC地址绑定
- 划分VLAN防御MAC地址欺骗攻击（与正常终端连接的交换机端口划分为一个vlan，不同vlan之间相互隔离）

#### DHCP欺骗攻击

^a8a1a2

原理：因为终端会选择**最先**对其请求进行响应的DHCP服务器为其提供网络信息，伪造的DHCP服务器会将黑客终端的IP地址作为默认网关

防御：管理员确认允许接收DHCP响应消息的交换机端口，交换机丢弃所有从其他端口接收到的DHCP响应消息

#### ARP（地址解析协议）欺骗攻击

ARP：网络设备通过ARP请求和应答获取目标设备的MAC地址

原理：攻击者通过伪造的ARP消息消息，使网络中的其他设备将攻击者的MAC地址与目标IP关联起来

防御：交换机建立正确的MAC地址与IP地址之间的绑定关系，丢弃所有错误的MAC地址与IP地址之间的绑定

#### 生成树欺骗攻击

生成树协议：通过阻塞端口将一个原本存在环路的的以太网拓扑结构转换成树形拓扑结构

原理：黑客终端配置为最高优先级的交换机从而成为根交换机，终端之间的数据传输会经过黑客终端

防御：不该接收并处理桥协议数据单元BPDU的交换机端口接收并处理了BPDU，则不允许其参与网络生成树的建立过程

---

### 欺骗攻击

定义：用错误的信息误导网络数据传输过程和用户资源访问过程的攻击行为

#### 源IP地址欺骗攻击

定义：某个终端发送IP分组时，不以该终端真实的IP地址作为源IP地址，而是用**其他终端的IP**，或者**伪造**一个本不存在的IP地址作为IP分组的源IP

#### 钓鱼网站

实施原理：
- 终端入侵
  - hosts文件劫持：将终端的hosts文件添加域名xxx与IP地址xxx的绑定项
  - 假域名服务器：将终端中配置的本地域名服务器改为假的域名服务器，在假的域名服务器中配置域名xxx与IP地址xxx的绑定项
- 非终端入侵
  - 参考DHCP欺骗攻击[[#DHCP欺骗攻击]]